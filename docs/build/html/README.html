<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview &mdash; AutoTransform 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extending For Your Organization" href="CUSTOM_DEPLOYMENT.html" />
    <link rel="prev" title="AutoTransform" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> AutoTransform
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><strong>Overview</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing"><strong>Installing</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary"><strong>Summary</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#goal"><strong>Goal</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#philosophies"><strong>Philosophies</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#component-based"><strong>Component Based</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#language-agnostic"><strong>Language Agnostic</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#minimal-developer-involvement"><strong>Minimal Developer Involvement</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-typing"><strong>Example - Typing</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#static-inference"><strong>Static Inference</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-time-logging"><strong>Run Time Logging</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-whole-versus-the-sum-of-the-parts"><strong>The Whole Versus the Sum of the Parts</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#core-functionality"><strong>Core Functionality</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#schema"><strong>Schema</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-components"><strong>Other Components</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#config-fetcher"><strong>Config Fetcher</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#item"><strong>Item</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#runner"><strong>Runner</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-flow"><strong>Data Flow</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#scheduled-runs"><strong>Scheduled Runs</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#schedule-file"><strong>Schedule File</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduling-params"><strong>Scheduling Params</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#invoking-scheduled-runs"><strong>Invoking Scheduled Runs</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#upcoming-milestones"><strong>Upcoming Milestones</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#milestone-1-beta-0-2-0-eta-5-29-2022"><strong>Milestone 1 - Beta 0.2.0 - ETA 5/29/2022</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#milestone-2-release-1-0-0-eta-7-29-2022"><strong>Milestone 2 - Release 1.0.0 - ETA 7/29/2022</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#security-best-practices"><strong>Security Best Practices</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#autotransform-user"><strong>AutoTransform User</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#reviewed-components"><strong>Reviewed Components</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#checked-in-schemas"><strong>Checked In Schemas</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#thorough-review"><strong>Thorough Review</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#schema-best-practices"><strong>Schema Best Practices</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#batch-correctly"><strong>Batch Correctly</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#no-mixing-of-safety-categories"><strong>No Mixing Of Safety Categories</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-test-test"><strong>Test Test Test</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#mind-developer-time"><strong>Mind Developer Time</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-council"><strong>Create A Council</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CUSTOM_DEPLOYMENT.html"><strong>Extending For Your Organization</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html"><strong>Contributing To AutoTransform</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html#what-should-i-know-when-developing-for-autotransform"><strong>What Should I Know When Developing For AutoTransform?</strong></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="autotransform.html">AutoTransform (autotransform)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AutoTransform</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><strong>Overview</strong></li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overview">
<h1><strong>Overview</strong><a class="headerlink" href="#overview" title="Permalink to this headline"></a></h1>
<section id="installing">
<h2><strong>Installing</strong><a class="headerlink" href="#installing" title="Permalink to this headline"></a></h2>
<blockquote>
<div><p><strong>⚠ WARNING:</strong> AutoTransform requires Python 3.10</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>Latest Release</strong> <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">AutoTransform</span></code></p></li>
<li><p><strong>Bleeding Edge</strong> <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+git://github.com/nathro/AutoTransform.git</span></code></p>
<ul>
<li><p>Windows users may need to replace <code class="docutils literal notranslate"><span class="pre">git://</span></code> with <code class="docutils literal notranslate"><span class="pre">https://</span></code></p></li>
<li><p>If you do not have git use: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">https://github.com/nathro/AutoTransform/archive/master.zip</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="summary">
<h2><strong>Summary</strong><a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>AutoTransform is an opensource framework for large-scale code modification. It enables a schema-based system of defining codemods that can then be run using AutoTransform, with options for automatic scheduling as well as change management. AutoTransform leverages a component-based model that allows adopters to quickly and easily get whatever behavior they need through the creation of new, custom components. Additionally, custom components can readily be added to the component library of AutoTransform to be shared more widely with others using the framework.</p>
</section>
<section id="goal">
<h2><strong>Goal</strong><a class="headerlink" href="#goal" title="Permalink to this headline"></a></h2>
<p>The goal of AutoTransform is to make codebase maintenance simple, easy, and automatic. By providing a clear structure for definition, all types of modifications can be automated. Some examples include:</p>
<ul class="simple">
<li><p>Library upgrades</p></li>
<li><p>API changes</p></li>
<li><p>Performance improvements</p></li>
<li><p>Lint or style fixes</p></li>
<li><p>Dead code</p></li>
<li><p>One-off refactors</p></li>
<li><p>Any other programmatically definable modification</p></li>
</ul>
</section>
<section id="philosophies">
<h2><strong>Philosophies</strong><a class="headerlink" href="#philosophies" title="Permalink to this headline"></a></h2>
<section id="component-based">
<h3><strong>Component Based</strong><a class="headerlink" href="#component-based" title="Permalink to this headline"></a></h3>
<p>AutoTransform heavily uses a component based model for functionality. This allows easy customization through the creation of new plug-and-play components. Core logic is about funneling information between components, while the components themselves contain business logic. While AutoTransform provides an ever-growing library of components for ease of adoption, bespoke components will always be needed for some use cases.</p>
</section>
<section id="language-agnostic">
<h3><strong>Language Agnostic</strong><a class="headerlink" href="#language-agnostic" title="Permalink to this headline"></a></h3>
<p>AutoTransform, though written in Python, is a language agnostic framework. Our component model allows AutoTransform to treat each component as a black-box that can leverage whatever tooling or language makes sense for the goal of the component. This is most heavily needed for the components which actually make code changes where leveraging tools for Abstract(or Concrete) Syntax Trees(AST/CST) is often done in the language being modified.</p>
</section>
<section id="minimal-developer-involvement">
<h3><strong>Minimal Developer Involvement</strong><a class="headerlink" href="#minimal-developer-involvement" title="Permalink to this headline"></a></h3>
<p>Managing large scale changes can be extremely time consuming, AutoTransform puts automation first with the goal of automating as much of the process as possible. Developer time is incredibly valuable and should be saved for things that actually require it. If a computer can do it, a computer should do it.</p>
</section>
</section>
<section id="example-typing">
<h2><strong>Example - Typing</strong><a class="headerlink" href="#example-typing" title="Permalink to this headline"></a></h2>
<p>As an example of how AutoTransform might be used, let’s go through the case of typing a legacy codebase. This is a notoriously difficult and time consuming process.</p>
<section id="static-inference">
<h3><strong>Static Inference</strong><a class="headerlink" href="#static-inference" title="Permalink to this headline"></a></h3>
<p>A codemod can be written that statically infers types from the types around whatever needs types. Hooking this up to scheduled runs would mean that as people type your code, other types can later be inferred. Additionally, as the codemod types code, that can reveal further types that can be statically inferred. This would allow typing to slowly build up over time automatically as the codemod runs and developers introduce more types themselves, significantly speeding up the process of typing a legacy codebase.</p>
</section>
<section id="run-time-logging">
<h3><strong>Run Time Logging</strong><a class="headerlink" href="#run-time-logging" title="Permalink to this headline"></a></h3>
<p>In addition to static typing, a codemod could instrument untyped functions or other code to log types at run time. These logs could then be fed into the codemod to add types to code that can’t be inferred but can be determined at run time. This codemod could additionally be written to only instrument a small part of the codebase at a given time, preventing excessive resource utilization.</p>
</section>
<section id="the-whole-versus-the-sum-of-the-parts">
<h3><strong>The Whole Versus the Sum of the Parts</strong><a class="headerlink" href="#the-whole-versus-the-sum-of-the-parts" title="Permalink to this headline"></a></h3>
<p>Each codemod that can change code can benefit from all other codemods. As run time logging adds types, static inference can make better changes. Dead code removal can clean up untyped code. The layered passes, and building on top of the changes of each codemod, can produce significantly greater wins.</p>
</section>
</section>
</section>
<section id="core-functionality">
<h1><strong>Core Functionality</strong><a class="headerlink" href="#core-functionality" title="Permalink to this headline"></a></h1>
<section id="schema">
<h2><strong>Schema</strong><a class="headerlink" href="#schema" title="Permalink to this headline"></a></h2>
<p>The core of AutoTransform is the <a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/schema/schema.py">schema</a>. A schema is a collection of components and configurations required to actually execute a change.</p>
<ul class="simple">
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/schema/config.py">Config</a></strong></p>
<ul>
<li><p><strong>Name</strong> - A unique name to identify the change in PRs and scheduling</p></li>
<li><p><strong>Owner</strong> - An owner to notify about actions taken by the schema</p></li>
<li><p><strong>Allowed Validation Level</strong> - The level of validation errors allowed by the schema (none vs warning vs error)</p></li>
</ul>
</li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/input/base.py">Input</a></strong> - The input component returns a list of Items that are potential targets of the change (i.e. file paths)</p></li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/filter/base.py">Filters</a></strong> - Filters take a set of Items and apply criteria to the Items that were not applied by the Input, such as checking if the key of the item matches a regex pattern.</p></li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/batcher/base.py">Batcher</a></strong> - A batcher takes a set of filtered Items and breaks them into groups that can be executed independently. This component also generates metadata for this grouping used for things like the body of a pull request.</p></li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/transformer/base.py">Transformer</a></strong> - The core of any change, takes a batch and actually makes changes to files based on the batch provided.</p></li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/validator/base.py">Validators</a></strong> - Validators are run after transformation to check the health of a codebase after the transformation and ensure no issues are present. Things like typing, testing, etc…</p></li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/command/base.py">Commands</a></strong> - Post run processes that need to be executed. Could involve updating databases, generating code, etc…</p></li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/repo/base.py">Repo</a></strong> - An abstraction for the repository being modified. Allows functionality like commits or submitting changes for review.</p></li>
</ul>
</section>
<section id="other-components">
<h2><strong>Other Components</strong><a class="headerlink" href="#other-components" title="Permalink to this headline"></a></h2>
<section id="config-fetcher">
<h3><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/config/fetcher.py">Config Fetcher</a></strong><a class="headerlink" href="#config-fetcher" title="Permalink to this headline"></a></h3>
<p>The ConfigFetcher allows for configuration of AutoTransform as a whole. This includes things like specifying custom component imports as well as providing credentials, such as a github token. There are three config fetchers provided as part of AutoTransform that can be selected based on the AUTO_TRANSFORM_CONFIG environment variable:</p>
<ul class="simple">
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/config/default.py">Default</a></strong> - Pulls configuration from data/config.ini, a<a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/data/sample_config.ini"> sample_config.ini</a> file provides an example. This is the easiest choice for local use cases on a developers machine.</p></li>
<li><p><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/config/envvar.py">Environment Variable</a></strong> - Pulls configuration from environment variables, using names that match the pattern: AUTO_TRANSFORM_&lt;SECTION&gt;_&lt;SETTING&gt; where section and setting represent the section and setting that would be used in a config.ini file, such as AUTO_TRANSFORM_CREDENTIALS_GITHUB_TOKEN. This is the preferred option for production use cases.</p></li>
</ul>
</section>
<section id="item">
<h3><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/item/base.py">Item</a></strong><a class="headerlink" href="#item" title="Permalink to this headline"></a></h3>
<p>An item represents a potential input to a transformation. It can represent a file or any other logical object. All Items must have keys that uniquely identify them within their type. While items of different types can have
the same key, separate items of the same type must have unique keys. Subclasses of Item can provide utility functionality, or support strongly typed extra data.</p>
</section>
<section id="runner">
<h3><strong><a class="reference external" href="https://github.com/nathro/AutoTransform/blob/master/autotransform/runner/base.py">Runner</a></strong><a class="headerlink" href="#runner" title="Permalink to this headline"></a></h3>
<p>Runner components are used to trigger a run of AutoTransform either locally or on an organization’s remote infrastructure or job queue system. This allows organizations to set up integrations with their infrastructure to speed up developers by offloading the runs of AutoTransform. Additionally, remote infrastructure is used by scheduling logic when setting up scheduled runs of AutoTransform.</p>
</section>
</section>
<section id="data-flow">
<h2><strong>Data Flow</strong><a class="headerlink" href="#data-flow" title="Permalink to this headline"></a></h2>
<p><strong><a class="reference external" href="https://lucid.app/lucidchart/eca43a3d-175f-416f-bb4f-4363d56f951b/edit?invitationId=inv_f44ed708-8c4a-4998-96f2-8b860aba8ebc">A visual representation</a></strong></p>
<p>The Input component of the schema will get a list of Items that may serve as inputs to a transformation, these are then passed through the Filters where only those that pass the is_valid check make it through. This filtered set of Items is then passed to a Batcher which breaks the Items into groups called Batches. Batches will be executed sequentially as independent changes going through a multi-step process. First, the Batch goes to a Transformer which makes the actual changes to the codebase. Next, Validators are invoked which check to ensure the codebase is still healthy. After this, Commands are run which perform post-change processing, such as code generation. Finally, the Repo object will check for changes, commit them if present, and submit them (i.e. as a Pull Request). Once this is done, the Repo object will return the repository to a clean state in preparation for the next Batch.</p>
</section>
<section id="scheduled-runs">
<h2><strong>Scheduled Runs</strong><a class="headerlink" href="#scheduled-runs" title="Permalink to this headline"></a></h2>
<p>AutoTransform provides a scheduling component for setting up automatically scheduled runs to maintain a codebase in to the future. Once set up, scheduled runs will ensure that an organization’s codebase stays up-to-date.</p>
<section id="schedule-file">
<h3><strong>Schedule File</strong><a class="headerlink" href="#schedule-file" title="Permalink to this headline"></a></h3>
<p>To get scheduled runs going, a JSON file with all scheduling information is required. The schedule format looks like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;base_time&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;runner&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">RunnerType</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;excluded_days&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">-</span><span class="mi">6</span><span class="o">&gt;</span><span class="p">],</span>
    <span class="s2">&quot;schemas&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">builder</span><span class="p">,</span> <span class="n">file</span><span class="o">&gt;</span><span class="p">,</span>
            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">,</span>
            <span class="s2">&quot;schedule&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;repeats&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">daily</span><span class="p">,</span> <span class="n">weekly</span><span class="o">&gt;</span><span class="p">,</span>
                <span class="s2">&quot;hour_of_day&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="mi">0</span><span class="o">-</span><span class="mi">23</span><span class="o">&gt;</span><span class="p">,</span>
                <span class="s2">&quot;day_of_week&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="mi">0</span><span class="o">-</span><span class="mi">6</span><span class="o">&gt;</span><span class="p">,</span>
                <span class="s2">&quot;sharding&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;num_shards&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
                    <span class="s2">&quot;shard_filter&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">FilterType</span><span class="p">,</span>
                        <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="o">...</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To see an example, check out <code class="docutils literal notranslate"><span class="pre">data/autotransform_schedule.json</span></code>.</p>
</section>
<section id="scheduling-params">
<h3><strong>Scheduling Params</strong><a class="headerlink" href="#scheduling-params" title="Permalink to this headline"></a></h3>
<p>The following params are used when scheduling schemas to run automatically.</p>
<ul class="simple">
<li><p><strong>Overall Params</strong></p>
<ul>
<li><p><strong>base_time</strong>: This serves as the basis for determining hour of day and day of week. When scheduling is invoked, this time is subtracted from the current time to determine day of week and hour of day, with the base time treated as hour 0 on day 0.</p></li>
<li><p><strong>runner</strong>: This is an encoded runner object. All schemas that have been scheduled will be run using this object. It should trigger runs on the organization’s CI infrastructure.</p></li>
<li><p><strong>excluded_days</strong>: A list of days of the week that schemas will not run. Defaults to empty.</p></li>
<li><p><strong>schemas</strong>: A list of schemas that are automatically scheduled.</p></li>
</ul>
</li>
<li><p><strong>Schema Params</strong></p>
<ul>
<li><p><strong>type</strong>: Either the string “builder” or the string “file”. This is used to determine whether the value of the schema param refers to a SchemaBuilderType or a file path.</p></li>
<li><p><strong>schema</strong>: Either a SchemaBuilderType or a file path.</p></li>
<li><p><strong>Schedule</strong></p>
<ul>
<li><p><strong>repeats</strong>: Either the string “daily” or the string “weekly”. How often the schema will be run.</p></li>
<li><p><strong>hour_of_day</strong>: Which hour of the day, using the logic described for base_time, that the schema will be run. Defaults to 0.</p></li>
<li><p><strong>day_of_week</strong>: Which day of the week, using the logic described for base_time, that the schema will be run. Defaults to 0. Only applies to weekly runs.</p></li>
<li><p><strong>Sharding</strong>: A Sharded schema is run on a subset of it’s input each time it is run. This subset is determined by the sharding params and can be used to break large runs over a codebase in to smaller pieces. Optional to include.</p>
<ul>
<li><p><strong>num_shards</strong>: The total number of shards to spread the input across.</p></li>
<li><p><strong>shard_filter</strong>: A ShardFilter object that will be used to perform the actual sharding. It will get the num_shards and current_shard from the scheduler when constructed.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="invoking-scheduled-runs">
<h3><strong>Invoking Scheduled Runs</strong><a class="headerlink" href="#invoking-scheduled-runs" title="Permalink to this headline"></a></h3>
<p>Scheduled runs are invoked using <code class="docutils literal notranslate"><span class="pre">autotransform</span> <span class="pre">schedule</span> <span class="pre">&lt;path_to_schedule_file&gt;</span></code>. If you use Github, you can see an example workflow at <code class="docutils literal notranslate"><span class="pre">data/workflows/autotransform_scheduler.yml</span></code> that shows how to use Github actions for automating scheduled runs. If you do not use Github, you can set up a cron job on your organization’s infrastructure to invoke the script on a schedule. Additionally, the <code class="docutils literal notranslate"><span class="pre">--time=&lt;int&gt;</span></code> option can be used to override the current timestamp when calculating hour/day. Using this may be useful if there is potential delay in your automation infrastructure.</p>
<p>As a note, if using GithubActions, the github_token used must have admin access to the repo to trigger further github actions.</p>
</section>
</section>
</section>
<section id="upcoming-milestones">
<h1><strong>Upcoming Milestones</strong><a class="headerlink" href="#upcoming-milestones" title="Permalink to this headline"></a></h1>
<section id="milestone-1-beta-0-2-0-eta-5-29-2022">
<h2><strong>Milestone 1 - Beta 0.2.0 - ETA 5/29/2022</strong><a class="headerlink" href="#milestone-1-beta-0-2-0-eta-5-29-2022" title="Permalink to this headline"></a></h2>
<p>An early beta with all core functionality, including scheduling and change management available with an initial set of core components. This represents a mostly locked down version of the code, APIs, etc. Breaking changes may still happen after this release, but they will be weighted heavily against potential existing adoption. Before this release, breaking changes will be far more likely.</p>
</section>
<section id="milestone-2-release-1-0-0-eta-7-29-2022">
<h2><strong>Milestone 2 - Release 1.0.0 - ETA 7/29/2022</strong><a class="headerlink" href="#milestone-2-release-1-0-0-eta-7-29-2022" title="Permalink to this headline"></a></h2>
<p>This will include changes made as part of easing initial deployments. At this point AutoTransform will have been deployed to a production environment and the components will be considered production ready. Breaking changes after this release will be very unlikely and will coincide with new major versions of AutoTransform.</p>
</section>
</section>
<section id="security-best-practices">
<h1><strong>Security Best Practices</strong><a class="headerlink" href="#security-best-practices" title="Permalink to this headline"></a></h1>
<p>The nature of AutoTransform creates the potential for significant security implications when deployed at an organization. Because of this, there is a set of best practices that are strongly encouraged to ensure security is maintained. These are less important for individual work that doesn’t get deployed to a production environment (i.e. updating personal projects).</p>
<section id="autotransform-user">
<h2><strong>AutoTransform User</strong><a class="headerlink" href="#autotransform-user" title="Permalink to this headline"></a></h2>
<p>Create a separate user in whatever code review/management system (i.e. Github) you use that will be the actor for all changes/management and supply their credentials via secrets/environment variables. Try to minimize access to these credentials using things like Github repo secrets. The number of people capable of creating bot credentials should be as small a set as possible.</p>
</section>
<section id="reviewed-components">
<h2><strong>Reviewed Components</strong><a class="headerlink" href="#reviewed-components" title="Permalink to this headline"></a></h2>
<p>All custom components used should be required to pull from a repo/package that goes through a code review process or is otherwise from a trusted open source provider (i.e. AutoTransform’s core components). Components will be able to access credentials and make changes to the codebase and thus must be reviewed.</p>
</section>
<section id="checked-in-schemas">
<h2><strong>Checked In Schemas</strong><a class="headerlink" href="#checked-in-schemas" title="Permalink to this headline"></a></h2>
<p>All schemas that are run through scheduling must be checked into the codebase. This prevents people from stitching together components in unexpected ways that can present security or codebase health concerns. By ensuring all schemas are checked in you additionally ensure that schemas are all reviewed.</p>
</section>
<section id="thorough-review">
<h2><strong>Thorough Review</strong><a class="headerlink" href="#thorough-review" title="Permalink to this headline"></a></h2>
<p>Schemas and components should be thoroughly reviewed and tested by people familiar with what they are trying to accomplish. Automated changes are readily accepted by developers and it is crucial that the schemas that produce these changes can be trusted. By putting in the upfront time to review the schemas, the review of the changes can be made much easier (or even unnecessary).</p>
</section>
</section>
<section id="schema-best-practices">
<h1><strong>Schema Best Practices</strong><a class="headerlink" href="#schema-best-practices" title="Permalink to this headline"></a></h1>
<section id="batch-correctly">
<h2><strong>Batch Correctly</strong><a class="headerlink" href="#batch-correctly" title="Permalink to this headline"></a></h2>
<p>The batching method chosen is very important. The more thorough reviewers need to be, the smaller the batches should be. If a schema can be guaranteed correct, one batch is fine. If review of each change is needed, the changes should be made in to small batches.</p>
</section>
<section id="no-mixing-of-safety-categories">
<h2><strong>No Mixing Of Safety Categories</strong><a class="headerlink" href="#no-mixing-of-safety-categories" title="Permalink to this headline"></a></h2>
<p>Some schemas produce guaranteed safe changes, some schemas produce mostly safe, but potentially incorrect changes. Separate schemas should be created for each of these types of changes. Mixing these types of changes in one schema will lead to complacency in review that can let errors slip through.</p>
</section>
<section id="test-test-test">
<h2><strong>Test Test Test</strong><a class="headerlink" href="#test-test-test" title="Permalink to this headline"></a></h2>
<p>Every component and schema should be thoroughly tested for each different possible case. AutoTransform is a scaling system that requires an upfront investment in exchange for automating all future work. By thoroughly testing your components and schemas you support all future changes.</p>
</section>
<section id="mind-developer-time">
<h2><strong>Mind Developer Time</strong><a class="headerlink" href="#mind-developer-time" title="Permalink to this headline"></a></h2>
<p>Just because something can be automated to be made better, doesn’t mean it should be. Developer time is important and wasting it by submitting numerous of changes for review that don’t really do much to improve things is a bad practice that can eliminate the benefits of AutoTransform. Try to minimize review required for changes where possible, and if review is required, ensure that it is worth the time of the reviewer to get the changes in.</p>
</section>
<section id="create-a-council">
<h2><strong>Create A Council</strong><a class="headerlink" href="#create-a-council" title="Permalink to this headline"></a></h2>
<p>As developers in your organization learn about AutoTransform, they will inevitably want to use it. Growth of usage will likely be organic and rapid, including many people without a lot of experience using these types of tools. Be prepared to have a council or other group these developers can go to for support.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="AutoTransform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="CUSTOM_DEPLOYMENT.html" class="btn btn-neutral float-right" title="Extending For Your Organization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Nathan Rockenbach.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>